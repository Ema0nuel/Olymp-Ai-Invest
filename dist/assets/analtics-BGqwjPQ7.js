import{s as o}from"./supabaseClients-DZSCHltC.js";let i=!1;async function g(n={}){if(!i){i=!0;try{const{data:{user:t}}=await o.auth.getUser();let e={};try{e=await(await fetch("https://ipapi.co/json/")).json()}catch(a){console.error("Geo fetch error:",a)}const s={table_name:"page_visit",operation:"VIEW",row_data:{page:window.location.pathname,title:document.title,referrer:document.referrer||null,...n},ip_address:e.ip||null,geo:{city:e.city,region:e.region,country:e.country_name,latitude:e.latitude,longitude:e.longitude,timezone:e.timezone},device_info:{user_agent:navigator.userAgent,platform:navigator.platform,language:navigator.language,screen:{width:window.screen.width,height:window.screen.height}},user_id:t?.id||null},{error:r}=await o.from("activity_logs").insert([s]);if(r)throw r}catch(t){console.error("Analytics tracking error:",t)}}}export{g as t};
//# sourceMappingURL=analtics-BGqwjPQ7.js.map
