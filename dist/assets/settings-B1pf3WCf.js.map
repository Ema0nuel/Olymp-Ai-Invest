{"version":3,"file":"settings-B1pf3WCf.js","sources":["../../src/script/views/user/functions/editHandler.js","../../src/script/views/user/settings.js"],"sourcesContent":["import supabase from '../../../utils/supabaseClients'\r\nimport toastify from '../../../components/toastify'\r\nimport spinner from '../../../utils/spinner'\r\nimport { loadPage } from '../../../routes/router'\r\n\r\nexport async function updateProfile(data) {\r\n    try {\r\n        spinner.start()\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n\r\n        if (!user) throw new Error('Not authenticated')\r\n\r\n        const updates = {\r\n            id: user.id,\r\n            updated_at: new Date(),\r\n            ...data\r\n        }\r\n\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update(updates)\r\n            .eq('id', user.id)\r\n\r\n        if (error) throw error\r\n\r\n        toastify({\r\n            text: 'Profile updated successfully',\r\n            background: 'bg-green-500'\r\n        })\r\n\r\n        await loadPage('settings')\r\n        return true\r\n    } catch (error) {\r\n        console.error('Update error:', error)\r\n        toastify({\r\n            text: error.message,\r\n            background: 'bg-red-500'\r\n        })\r\n        return false\r\n    } finally {\r\n        spinner.stop()\r\n    }\r\n}\r\n\r\nexport async function updateAvatar(file) {\r\n    try {\r\n        spinner.start()\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n\r\n        if (!user) throw new Error('Not authenticated')\r\n\r\n        const fileExt = file.name.split('.').pop()\r\n        const filePath = `${user.id}/avatar.${fileExt}`\r\n\r\n        // Upload image\r\n        const { error: uploadError } = await supabase.storage\r\n            .from('deposit-screenshots')\r\n            .upload(filePath, file, {\r\n                upsert: true\r\n            })\r\n\r\n        if (uploadError) throw uploadError\r\n\r\n        // Get public URL\r\n        const { data } = supabase.storage\r\n            .from('deposit-screenshots')\r\n            .getPublicUrl(filePath)\r\n\r\n        // Update profile\r\n        const { error: updateError } = await supabase\r\n            .from('profiles')\r\n            .update({\r\n                avatar_url: data.publicUrl,\r\n                updated_at: new Date()\r\n            })\r\n            .eq('id', user.id)\r\n\r\n        if (updateError) throw updateError\r\n\r\n        toastify({\r\n            text: 'Avatar updated successfully',\r\n            background: 'bg-green-500'\r\n        })\r\n\r\n        await loadPage('settings')\r\n        return data.publicUrl\r\n    } catch (error) {\r\n        console.error('Avatar update error:', error)\r\n        toastify({\r\n            text: error.message,\r\n            background: 'bg-red-500'\r\n        })\r\n        return null\r\n    } finally {\r\n        spinner.stop()\r\n    }\r\n}\r\n\r\nexport async function updatePin(currentPin, newPin) {\r\n    try {\r\n        spinner.start()\r\n        const { data: { user } } = await supabase.auth.getUser()\r\n\r\n        if (!user) throw new Error('Not authenticated')\r\n\r\n        // First verify current PIN\r\n        const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('pin')\r\n            .eq('id', user.id)\r\n            .single()\r\n\r\n        if (profile.pin !== currentPin) {\r\n            throw new Error('Current PIN is incorrect')\r\n        }\r\n\r\n        // Update PIN\r\n        const { error } = await supabase\r\n            .from('profiles')\r\n            .update({\r\n                pin: newPin,\r\n                updated_at: new Date()\r\n            })\r\n            .eq('id', user.id)\r\n\r\n        if (error) throw error\r\n\r\n        toastify({\r\n            text: 'PIN updated successfully',\r\n            background: 'bg-green-500'\r\n        })\r\n\r\n        await loadPage('settings')\r\n        return true\r\n    } catch (error) {\r\n        console.error('PIN update error:', error)\r\n        toastify({\r\n            text: error.message,\r\n            background: 'bg-red-500'\r\n        })\r\n        return false\r\n    } finally {\r\n        spinner.stop()\r\n    }\r\n}","import auth from '../../utils/auth'\r\nimport reset from '../../utils/reset'\r\nimport Navbar from './components/Navbar'\r\nimport supabase from '../../utils/supabaseClients'\r\nimport { updateProfile, updateAvatar, updatePin } from './functions/editHandler'\r\nimport spinner from '../../utils/spinner'\r\nimport Modal from '../../components/Modal'\r\nimport USER from '../../../images/user.png'\r\nimport { loadPage } from '../../routes/router'\r\nimport { trackPageVisit } from '../../utils/analtics'\r\n\r\n\r\nconst settings = async () => {\r\n    const authCheck = await auth.check('settings')\r\n    if (!authCheck) return { html: '', pageEvents: () => { } }\r\n\r\n    reset('Olymp AI | Settings')\r\n    await trackPageVisit()\r\n    const { html: navbar, pageEvents: navEvents } = Navbar()\r\n\r\n    // State\r\n    let userProfile = null\r\n    let accountBalance = 0\r\n\r\n    // Add this function before pageEvents\r\n    async function handleKycNavigation() {\r\n        await loadPage('kyc')\r\n    }\r\n\r\n    // Fetch user profile and balance\r\n    async function fetchUserData() {\r\n        try {\r\n            spinner.start()\r\n            const { data: { user } } = await supabase.auth.getUser()\r\n\r\n            if (!user) throw new Error('Not authenticated')\r\n\r\n            const [profileResult, balanceResult] = await Promise.all([\r\n                supabase\r\n                    .from('profiles')\r\n                    .select('*')\r\n                    .eq('id', user.id)\r\n                    .single(),\r\n                supabase\r\n                    .from('trading_accounts')\r\n                    .select('balance')\r\n                    .eq('user_id', user.id)\r\n                    .eq('account_type', 'live')\r\n                    .single()\r\n            ])\r\n\r\n            if (profileResult.error) throw profileResult.error\r\n            if (balanceResult.error) throw balanceResult.error\r\n\r\n            userProfile = profileResult.data\r\n            accountBalance = balanceResult.data.balance\r\n\r\n            // Update UI\r\n            updateProfileUI()\r\n        } catch (error) {\r\n            console.error('Fetch error:', error)\r\n        } finally {\r\n            spinner.stop()\r\n        }\r\n    }\r\n\r\n    // Handle avatar change\r\n    async function handleAvatarChange(e) {\r\n        const file = e.target.files[0]\r\n        if (!file) return\r\n\r\n        const newAvatarUrl = await updateAvatar(file)\r\n        if (newAvatarUrl) {\r\n            document.getElementById('avatarImage').src = newAvatarUrl\r\n        }\r\n    }\r\n\r\n    // Handle profile form submission\r\n    async function handleProfileUpdate(e) {\r\n        e.preventDefault()\r\n        const formData = new FormData(e.target)\r\n        const updates = Object.fromEntries(formData)\r\n\r\n        const success = await updateProfile(updates)\r\n        if (success) {\r\n            await fetchUserData()\r\n        }\r\n    }\r\n\r\n    // Handle PIN change\r\n    async function handlePinChange() {\r\n        const modal = new Modal({\r\n            title: 'Change Transaction PIN',\r\n            content: `\r\n                <div class=\"space-y-4\">\r\n                    <input type=\"password\" \r\n                           id=\"currentPin\"\r\n                           class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\"\r\n                           placeholder=\"Current PIN\"\r\n                           maxlength=\"6\"\r\n                           pattern=\"[0-9]*\">\r\n                    <input type=\"password\" \r\n                           id=\"newPin\"\r\n                           class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\"\r\n                           placeholder=\"New PIN\"\r\n                           maxlength=\"6\"\r\n                           pattern=\"[0-9]*\">\r\n                    <input type=\"password\" \r\n                           id=\"confirmPin\"\r\n                           class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\"\r\n                           placeholder=\"Confirm New PIN\"\r\n                           maxlength=\"6\"\r\n                           pattern=\"[0-9]*\">\r\n                </div>\r\n            `,\r\n            actions: [{\r\n                text: 'Update PIN',\r\n                primary: true,\r\n                onClick: async (close) => {\r\n                    const currentPin = document.getElementById('currentPin').value\r\n                    const newPin = document.getElementById('newPin').value\r\n                    const confirmPin = document.getElementById('confirmPin').value\r\n\r\n                    if (newPin !== confirmPin) {\r\n                        toastify({\r\n                            text: 'PINs do not match',\r\n                            background: 'bg-red-500'\r\n                        })\r\n                        return\r\n                    }\r\n\r\n                    const success = await updatePin(currentPin, newPin)\r\n                    if (success) close()\r\n                }\r\n            }]\r\n        })\r\n        modal.show()\r\n    }\r\n\r\n    // Update profile UI\r\n    function updateProfileUI() {\r\n        if (!userProfile) return\r\n\r\n        const kycStatus = document.getElementById('kycStatus')\r\n        if (kycStatus) {\r\n            kycStatus.className = `px-2 py-1 rounded text-xs ${userProfile.kyc_status === 'approved' ? 'bg-green-500/20 text-green-500' :\r\n                userProfile.kyc_status === 'pending' ? 'bg-yellow-500/20 text-yellow-500' :\r\n                    userProfile.kyc_status === 'rejected' ? 'bg-red-500/20 text-red-500' :\r\n                        'bg-gray-500/20 text-gray-500'\r\n                }`\r\n            kycStatus.textContent = userProfile.kyc_status?.toUpperCase() || 'NOT STARTED'\r\n        }\r\n\r\n        // Update form fields\r\n        const form = document.getElementById('profileForm')\r\n        if (form) {\r\n            Object.keys(userProfile).forEach(key => {\r\n                const input = form.elements[key]\r\n                if (input) input.value = userProfile[key]\r\n            })\r\n        }\r\n    }\r\n\r\n    // Global handlers\r\n    window.handleAvatarChange = handleAvatarChange\r\n    window.handleProfileUpdate = handleProfileUpdate\r\n    window.handlePinChange = handlePinChange\r\n    window.handleKycNavigation = handleKycNavigation  // Add this line\r\n\r\n    // Initialize\r\n    await fetchUserData()\r\n\r\n    function pageEvents() {\r\n        navEvents()\r\n    }\r\n\r\n    return {\r\n        html: /* html */`\r\n            ${navbar}\r\n            <main class=\"main-scroll-view pb-36 lg:pb-0\">\r\n                <div class=\"max-w-4xl mx-auto p-4 md:p-8 space-y-8\">\r\n                    <!-- Profile Card -->\r\n                    <div class=\"bg-gradient-to-br from-brand-black/80 to-brand-black/40 backdrop-blur-xl rounded-3xl p-6 border border-brand-primary/10\">\r\n                        <div class=\"flex flex-col md:flex-row items-center gap-6\">\r\n                            <!-- Avatar Section -->\r\n                            <div class=\"relative group\">\r\n                                <div class=\"w-24 h-24 rounded-full overflow-hidden border-2 border-brand-primary\">\r\n                                    <img id=\"avatarImage\"\r\n                                         src=\"${userProfile?.avatar_url || USER}\"\r\n                                         alt=\"Profile\"\r\n                                         class=\"w-full h-full object-cover\">\r\n                                </div>\r\n                                <label class=\"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 cursor-pointer rounded-full transition-opacity\">\r\n                                    <i class=\"fas fa-camera text-white\"></i>\r\n                                    <input type=\"file\"\r\n                                           accept=\"image/*\"\r\n                                           class=\"hidden\"\r\n                                           onchange=\"window.handleAvatarChange(event)\">\r\n                                </label>\r\n                            </div>\r\n\r\n                            <!-- User Info -->\r\n                            <div class=\"flex-1 text-center md:text-left\">\r\n                                <h2 class=\"text-2xl font-bold text-white\">${userProfile?.full_name || 'User'}</h2>\r\n                                <p class=\"text-gray-400\">${userProfile?.email}</p>\r\n                                <div class=\"mt-2 flex flex-wrap gap-3 justify-center md:justify-start\">\r\n                                    <span class=\"px-3 py-1 bg-brand-primary/10 rounded-full text-brand-primary text-sm\">\r\n                                        <i class=\"fas fa-wallet mr-1\"></i>$${accountBalance.toFixed(2)}\r\n                                    </span>\r\n                                    <span id=\"kycStatus\" class=\"px-3 py-1 rounded-full text-sm\">\r\n                                        ${userProfile?.kyc_status || 'NOT STARTED'}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Quick Actions -->\r\n                            <div class=\"flex gap-2\">\r\n                                <button onclick=\"window.handlePinChange()\"\r\n                                        class=\"p-3 bg-brand-primary/10 rounded-xl hover:bg-brand-primary/20 transition-colors\">\r\n                                    <i class=\"fas fa-key text-brand-primary\"></i>\r\n                                </button>\r\n                                <!-- First KYC button in Quick Actions -->\r\n                                ${userProfile?.kyc_status !== 'approved' ? `\r\n                                    <button onclick=\"window.handleKycNavigation()\"\r\n                                            class=\"p-3 bg-green-500/10 rounded-xl hover:bg-green-500/20 transition-colors\">\r\n                                        <i class=\"fas fa-shield-check text-green-500\"></i>\r\n                                    </button>\r\n                                ` : ''}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Edit Profile Form -->\r\n                    <form id=\"profileForm\" class=\"space-y-6\" onsubmit=\"window.handleProfileUpdate(event)\">\r\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"block text-sm font-medium text-gray-400\">Full Name</label>\r\n                                <input type=\"text\"\r\n                                       name=\"full_name\"\r\n                                       required\r\n                                       class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\">\r\n                            </div>\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"block text-sm font-medium text-gray-400\">Phone Number</label>\r\n                                <input type=\"tel\"\r\n                                       name=\"phone_number\"\r\n                                       class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\">\r\n                            </div>\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"block text-sm font-medium text-gray-400\">Country</label>\r\n                                <input type=\"text\"\r\n                                       name=\"country\"\r\n                                       class=\"w-full p-4 bg-brand-black/50 border border-brand-primary/20 rounded-xl text-white\">\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button type=\"submit\"\r\n                                class=\"w-full md:w-auto px-6 py-3 bg-brand-primary text-white rounded-xl hover:bg-brand-primary/90 transition-colors\">\r\n                            Save Changes\r\n                        </button>\r\n                    </form>\r\n\r\n                    <!-- Security Section -->\r\n                    <div class=\"space-y-4 pb-14 lg:pb-0\">\r\n                        <h3 class=\"text-lg font-medium text-white\">Security</h3>\r\n                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <button onclick=\"window.handlePinChange()\"\r\n                                    class=\"p-4 bg-brand-black/50 border border-brand-primary/10 rounded-xl hover:bg-brand-primary/5 transition-colors flex items-center justify-between\">\r\n                                <span class=\"flex items-center gap-3\">\r\n                                    <i class=\"fas fa-key text-brand-primary\"></i>\r\n                                    <span class=\"text-white\">Change Transaction PIN</span>\r\n                                </span>\r\n                                <i class=\"fas fa-chevron-right text-gray-400\"></i>\r\n                            </button>\r\n                            <!-- Second KYC button in Security Section -->\r\n                            <button onclick=\"window.handleKycNavigation()\"\r\n                                    class=\"p-4 bg-brand-black/50 border border-brand-primary/10 rounded-xl hover:bg-brand-primary/5 transition-colors flex items-center justify-between\">\r\n                                <span class=\"flex items-center gap-3\">\r\n                                    <i class=\"fas fa-shield-alt text-brand-primary\"></i>\r\n                                    <span class=\"text-white\">Identity Verification</span>\r\n                                </span>\r\n                                <i class=\"fas fa-chevron-right text-gray-400\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        `,\r\n        pageEvents\r\n    }\r\n}\r\n\r\nexport default settings"],"names":["updateProfile","data","spinner","user","supabase","updates","error","toastify","loadPage","updateAvatar","file","fileExt","filePath","uploadError","updateError","updatePin","currentPin","newPin","profile","settings","auth","reset","trackPageVisit","navbar","navEvents","Navbar","userProfile","accountBalance","handleKycNavigation","fetchUserData","profileResult","balanceResult","updateProfileUI","handleAvatarChange","e","newAvatarUrl","handleProfileUpdate","formData","handlePinChange","Modal","close","confirmPin","kycStatus","form","key","input","pageEvents","USER"],"mappings":"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"}