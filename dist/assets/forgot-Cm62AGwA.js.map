{"version":3,"file":"forgot-Cm62AGwA.js","sources":["../../src/script/views/user/functions/forgotHandler.js","../../src/script/views/user/forgot.js"],"sourcesContent":["import spinner from '../../../utils/spinner'\r\nimport toastify from '../../../components/toastify'\r\nimport supabase from '../../../utils/supabaseClients'\r\nimport { loadPage } from '../../../routes/router'\r\n\r\nexport async function forgotHandler(email) {\r\n    try {\r\n        spinner.start()\r\n\r\n        const { error } = await supabase.auth.resetPasswordForEmail(email, {\r\n            redirectTo: `${window.location.origin}/reset-password`\r\n        })\r\n\r\n        if (error) throw error\r\n\r\n        spinner.stop()\r\n        toastify({\r\n            text: \"Password reset instructions sent to your email\",\r\n            icon: \"fas fa-envelope\",\r\n            background: \"bg-green-500/10\",\r\n            duration: 3000\r\n        })\r\n\r\n        // Delay redirect to show notification\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        await loadPage('login')\r\n        return true\r\n\r\n    } catch (error) {\r\n        spinner.stop()\r\n        toastify({\r\n            text: error.message || \"Failed to send reset instructions\",\r\n            icon: \"fas fa-exclamation-circle\",\r\n            background: \"bg-red-500/10\",\r\n            duration: 3000\r\n        })\r\n        return false\r\n    }\r\n}","import LOGO from '../../../images/logo.jpg'\r\nimport reset, { cleanupAll } from '../../utils/reset'\r\nimport { handleTestimony, initTestimonials } from '../../components/Bannar'\r\nimport { forgotHandler } from './functions/forgotHandler'\r\nimport { trackPageVisit } from '../../utils/analtics'\r\n\r\n\r\nconst forgot = async () => {\r\n    reset('Forgot Password | Olymp AI Invest')\r\n    cleanupAll()\r\n    await trackPageVisit()\r\n\r\n    function pageEvents() {\r\n        // Initialize testimonials\r\n        setTimeout(() => initTestimonials(), 100)\r\n\r\n        const form = document.getElementById('forgotForm')\r\n        const emailInput = document.getElementById('email')\r\n        const submitButton = form?.querySelector('button[type=\"submit\"]')\r\n\r\n        // Email validation\r\n        if (emailInput) {\r\n            emailInput.addEventListener('input', (e) => {\r\n                const isValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e.target.value)\r\n                emailInput.style.borderColor = isValid ? '' : 'rgb(239, 68, 68)'\r\n                submitButton.disabled = !isValid\r\n            })\r\n        }\r\n\r\n        // Form submission\r\n        if (form) {\r\n            form.addEventListener('submit', async (e) => {\r\n                e.preventDefault()\r\n\r\n                const email = emailInput.value.trim()\r\n                if (!email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\r\n                    return\r\n                }\r\n\r\n                // Disable submit button\r\n                if (submitButton) {\r\n                    submitButton.disabled = true\r\n                    submitButton.innerHTML = `\r\n                        <i class=\"fas fa-spinner fa-spin\"></i>\r\n                        <span>Sending Instructions...</span>\r\n                    `\r\n                }\r\n\r\n                await forgotHandler(email)\r\n\r\n                // Re-enable submit button on failure\r\n                if (submitButton) {\r\n                    submitButton.disabled = false\r\n                    submitButton.innerHTML = `\r\n                        Send Instructions\r\n                        <i class=\"fas fa-paper-plane text-sm\"></i>\r\n                    `\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    return ({\r\n        html: /* html */`\r\n        <div class=\"min-h-screen flex flex-col lg:flex-row animate-fade-in-up\">\r\n            <!-- Form Section -->\r\n            <main class=\"flex-1 flex items-center justify-center p-6 lg:p-12 relative overflow-hidden\">\r\n                <div class=\"absolute inset-0 bg-brand-blue/10\"></div>\r\n                \r\n                <!-- Logo -->\r\n                <div class=\"absolute top-8 left-8\">\r\n                    <a href=\"/\" data-nav class=\"flex items-center gap-2\">\r\n                        <img src=\"${LOGO}\" alt=\"Olymp AI Invest\" class=\"h-8\">\r\n                        <span class=\"text-lg font-bold text-brand-primary\">Olymp AI</span>\r\n                    </a>\r\n                </div>\r\n\r\n                <!-- Form Container -->\r\n                <div class=\"w-full max-w-md z-10 relative\">\r\n                    <div class=\"p-8\">\r\n                        <div class=\"text-center lg:text-left mb-8\">\r\n                            <h1 class=\"text-2xl lg:text-3xl font-bold text-white mb-2\">\r\n                                Reset Password\r\n                            </h1>\r\n                            <p class=\"text-gray-400\">\r\n                                Enter your email address and we'll send you instructions to reset your password\r\n                            </p>\r\n                        </div>\r\n\r\n                        <form id=\"forgotForm\" class=\"space-y-6\">\r\n                            <!-- Email Input -->\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"text-sm font-medium text-gray-300\" for=\"email\">\r\n                                    Email Address\r\n                                </label>\r\n                                <input type=\"email\" \r\n                                       id=\"email\" \r\n                                       required\r\n                                       class=\"w-full px-4 py-3 rounded-xl bg-brand-black/80 text-white \r\n                                              border border-brand-primary/30 focus:border-brand-primary \r\n                                              outline-none transition-all\" \r\n                                       placeholder=\"you@example.com\">\r\n                            </div>\r\n\r\n                            <!-- Submit Button -->\r\n                            <button type=\"submit\" \r\n                                    disabled\r\n                                    class=\"w-full py-3 rounded-xl bg-brand-primary text-brand-blue \r\n                                           font-bold text-lg hover:bg-opacity-90 transition-all \r\n                                           flex items-center justify-center gap-2\r\n                                           disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                                Send reset email\r\n                                <i class=\"fas fa-paper-plane text-sm\"></i>\r\n                            </button>\r\n                        </form>\r\n\r\n                        <!-- Back to Login Link -->\r\n                        <p class=\"mt-6 text-center text-gray-400\">\r\n                            Remember your password? \r\n                            <a href=\"/login\" data-nav \r\n                               class=\"text-brand-primary hover:text-brand-primary/80 transition-colors\">\r\n                                Back to Login\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n            <!-- Testimonials Section -->\r\n            <aside class=\"hidden lg:flex flex-1 relative bg-brand-dark overflow-hidden\">\r\n                ${handleTestimony()}\r\n            </aside>\r\n        </div>\r\n        `,\r\n        pageEvents\r\n    })\r\n}\r\n\r\nexport default forgot"],"names":["forgotHandler","email","spinner","error","supabase","toastify","resolve","loadPage","forgot","reset","cleanupAll","trackPageVisit","pageEvents","initTestimonials","form","emailInput","submitButton","e","isValid","LOGO","handleTestimony"],"mappings":"+XAKO,eAAeA,EAAcC,EAAO,CACvC,GAAI,CACAC,EAAQ,MAAK,EAEb,KAAM,CAAE,MAAAC,CAAK,EAAK,MAAMC,EAAS,KAAK,sBAAsBH,EAAO,CAC/D,WAAY,GAAG,OAAO,SAAS,MAAM,iBACjD,CAAS,EAED,GAAIE,EAAO,MAAMA,EAEjB,OAAAD,EAAQ,KAAI,EACZG,EAAS,CACL,KAAM,iDACN,KAAM,kBACN,WAAY,kBACZ,SAAU,GACtB,CAAS,EAGD,MAAM,IAAI,QAAQC,GAAW,WAAWA,EAAS,GAAI,CAAC,EACtD,MAAMC,EAAS,OAAO,EACf,EAEX,OAASJ,EAAO,CACZ,OAAAD,EAAQ,KAAI,EACZG,EAAS,CACL,KAAMF,EAAM,SAAW,oCACvB,KAAM,4BACN,WAAY,gBACZ,SAAU,GACtB,CAAS,EACM,EACX,CACJ,CC/BK,MAACK,EAAS,SAAY,CACvBC,EAAM,mCAAmC,EACzCC,EAAU,EACV,MAAMC,EAAc,EAEpB,SAASC,GAAa,CAElB,WAAW,IAAMC,EAAgB,EAAI,GAAG,EAExC,MAAMC,EAAO,SAAS,eAAe,YAAY,EAC3CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAeF,GAAM,cAAc,uBAAuB,EAG5DC,GACAA,EAAW,iBAAiB,QAAUE,GAAM,CACxC,MAAMC,EAAU,6BAA6B,KAAKD,EAAE,OAAO,KAAK,EAChEF,EAAW,MAAM,YAAcG,EAAU,GAAK,mBAC9CF,EAAa,SAAW,CAACE,CAC7B,CAAC,EAIDJ,GACAA,EAAK,iBAAiB,SAAU,MAAOG,GAAM,CACzCA,EAAE,eAAc,EAEhB,MAAMhB,EAAQc,EAAW,MAAM,KAAI,EAC/B,CAACd,GAAS,CAAC,6BAA6B,KAAKA,CAAK,IAKlDe,IACAA,EAAa,SAAW,GACxBA,EAAa,UAAY;AAAA;AAAA;AAAA,uBAM7B,MAAMhB,EAAcC,CAAK,EAGrBe,IACAA,EAAa,SAAW,GACxBA,EAAa,UAAY;AAAA;AAAA;AAAA,uBAKjC,CAAC,CAET,CAEA,MAAQ,CACJ,KAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCASYG,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA0DtBC,EAAe,CAAE;AAAA;AAAA;AAAA,UAI3B,WAAAR,CACR,CACA"}