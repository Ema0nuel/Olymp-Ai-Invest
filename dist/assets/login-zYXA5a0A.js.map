{"version":3,"file":"login-zYXA5a0A.js","sources":["../../src/script/views/user/login.js"],"sourcesContent":["import LOGO from '../../../images/logo.jpg'\r\nimport reset, { cleanupAll } from '../../utils/reset'\r\nimport { handleTestimony, initTestimonials } from '../../components/Bannar'\r\nimport { loginHandler } from './functions/loginHandler'\r\nimport { handleGoogleLogin } from './functions/signupHandler'\r\nimport auth from '../../utils/auth'\r\nimport { trackPageVisit } from '../../utils/analtics'\r\n\r\n\r\nconst login = async () => {\r\n    // Check auth first\r\n    const authCheck = await auth.check('login')\r\n    if (!authCheck) return { html: '', pageEvents: () => { } }\r\n    reset('Login | Olymp AI Invest')\r\n    await trackPageVisit()\r\n\r\n    cleanupAll()\r\n\r\n    function pageEvents() {\r\n        // Initialize testimonials\r\n        setTimeout(() => initTestimonials(), 100)\r\n\r\n        const form = document.getElementById('loginForm')\r\n        const emailInput = document.getElementById('email')\r\n        const passwordInput = document.getElementById('password')\r\n        const submitButton = form?.querySelector('button[type=\"submit\"]')\r\n\r\n        // Email validation\r\n        if (emailInput) {\r\n            emailInput.addEventListener('input', (e) => {\r\n                const isValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e.target.value)\r\n                emailInput.style.borderColor = isValid ? '' : 'rgb(239, 68, 68)'\r\n            })\r\n        }\r\n\r\n        // Password visibility toggle\r\n        const togglePassword = document.createElement('button')\r\n        togglePassword.type = 'button'\r\n        togglePassword.className = 'absolute right-4 bottom-0 -translate-y-1/2 text-gray-400 hover:text-white transition-colors'\r\n        togglePassword.innerHTML = '<i class=\"fas fa-eye\"></i>'\r\n\r\n        if (passwordInput) {\r\n            togglePassword.addEventListener('click', () => {\r\n                const type = passwordInput.type === 'password' ? 'text' : 'password'\r\n                passwordInput.type = type\r\n                togglePassword.innerHTML = type === 'password'\r\n                    ? '<i class=\"fas fa-eye\"></i>'\r\n                    : '<i class=\"fas fa-eye-slash\"></i>'\r\n            })\r\n            passwordInput.parentElement.style.position = 'relative'\r\n            passwordInput.parentElement.appendChild(togglePassword)\r\n        }\r\n\r\n        // Form submission\r\n        if (form) {\r\n            form.addEventListener('submit', async (e) => {\r\n                e.preventDefault()\r\n\r\n                // Disable submit button\r\n                if (submitButton) {\r\n                    submitButton.disabled = true\r\n                    submitButton.innerHTML = `\r\n                        <i class=\"fas fa-spinner fa-spin\"></i>\r\n                        <span>Signing in...</span>\r\n                    `\r\n                }\r\n\r\n                const formData = {\r\n                    email: emailInput.value.trim(),\r\n                    password: passwordInput.value\r\n                }\r\n\r\n                await loginHandler(formData)\r\n\r\n                // Re-enable submit button on failure\r\n                if (submitButton) {\r\n                    submitButton.disabled = false\r\n                    submitButton.innerHTML = `\r\n                        Sign In\r\n                        <i class=\"fas fa-arrow-right text-sm\"></i>\r\n                    `\r\n                }\r\n            })\r\n        }\r\n\r\n        const googleButton = document.getElementById('googleLogin')\r\n        const biometricButton = document.getElementById('biometricLogin')\r\n\r\n        // Google Sign In\r\n        if (googleButton) {\r\n            googleButton.addEventListener('click', handleGoogleLogin)\r\n        }\r\n\r\n        // Biometric Login\r\n        if (biometricButton && window.PublicKeyCredential) {\r\n            biometricButton.addEventListener('click', async () => {\r\n                const email = emailInput?.value?.trim()\r\n                const result = await loginHandler({ email })\r\n                if (!result) {\r\n                    form.classList.remove('hidden')\r\n                }\r\n            })\r\n        } else if (biometricButton) {\r\n            biometricButton.style.display = 'none'\r\n        }\r\n    }\r\n\r\n    return ({\r\n        html: /* html */`\r\n        <div class=\"min-h-screen w-full flex\">\r\n            <!-- Login Form Section -->\r\n            <main class=\"flex-1 min-h-screen bg-brand-blue/10 relative\">\r\n                \r\n                 <!-- Fixed Header -->\r\n                <header class=\"fixed top-0 left-0 right-0 h-16 flex items-center px-8\">\r\n                    <a href=\"/\" data-nav class=\"flex items-center gap-2\">\r\n                        <img src=\"${LOGO}\" alt=\"Olymp AI Invest\" class=\"h-8 w-auto\">\r\n                        <span class=\"text-lg font-bold text-brand-primary\">Olymp AI</span>\r\n                    </a>\r\n                </header>\r\n\r\n                <!-- Scrollable Content Area -->\r\n                <div class=\"w-full pt-16 pb-8 overflow-y-auto h-screen\">\r\n                    <div class=\"max-w-md mx-auto px-6 py-8\">\r\n                        <!-- Form Header -->\r\n                        <div class=\"mb-8\">\r\n                            <h1 class=\"text-2xl lg:text-3xl font-bold text-white\">Welcome Back</h1>\r\n                            <p class=\"text-gray-400 mt-2\">Sign in to your trading account</p>\r\n                        </div>\r\n\r\n                        <!-- Social Login Buttons -->\r\n                        <div class=\"space-y-4 mb-6\">\r\n                            <button id=\"googleLogin\"\r\n                                class=\"w-full py-3 px-4 rounded-xl bg-white text-gray-800 \r\n                                       font-medium flex items-center justify-center gap-3 \r\n                                       hover:bg-gray-100 transition-colors\">\r\n                                <svg class=\"w-5 h-5\" viewBox=\"0 0 24 24\">\r\n                                    <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\r\n                                    <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\r\n                                    <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\r\n                                    <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\r\n                                </svg>\r\n                                Continue with Google\r\n                            </button>\r\n\r\n                            <!-- Biometric Button -->\r\n                            <button id=\"biometricLogin\" \r\n                                class=\"w-full py-3 rounded-xl border border-brand-primary/30 \r\n                                       text-brand-primary hover:bg-brand-primary/10 transition-all \r\n                                       flex items-center justify-center gap-2\">\r\n                                <svg class=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                                    <path d=\"M12 14c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5z\" \r\n                                          stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                                    <path d=\"M20.59 22c-1.88-3.21-5.44-5-8.59-5s-6.71 1.79-8.59 5\" \r\n                                          stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                                    <path d=\"M7 9a5 5 0 0 1 10 0\" \r\n                                          stroke-width=\"2\" stroke-linecap=\"round\"/>\r\n                                </svg>\r\n                                Use Biometrics\r\n                            </button>\r\n                        </div>\r\n\r\n                        <!-- Divider -->\r\n                        <div class=\"relative my-6\">\r\n                            <div class=\"absolute inset-0 flex items-center\">\r\n                                <div class=\"w-full border-t border-gray-600\"></div>\r\n                            </div>\r\n                            <div class=\"relative flex justify-center text-sm\">\r\n                                <span class=\"px-2 bg-[#0d0f12] text-gray-400\">or continue with email</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <form id=\"loginForm\" class=\"space-y-6\">\r\n                            <!-- Email Input -->\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"text-sm font-medium text-gray-300\" for=\"email\">\r\n                                    Email Address\r\n                                </label>\r\n                                <input type=\"email\" id=\"email\" required\r\n                                       class=\"w-full px-4 py-3 rounded-xl bg-brand-black/80 text-white \r\n                                              border border-brand-primary/30 focus:border-brand-primary \r\n                                              outline-none transition-all\" \r\n                                       placeholder=\"you@example.com\">\r\n                            </div>\r\n\r\n                            <!-- Password Input -->\r\n                            <div class=\"space-y-2\">\r\n                                <div class=\"flex items-center justify-between\">\r\n                                    <label class=\"text-sm font-medium text-gray-300\" for=\"password\">\r\n                                        Password\r\n                                    </label>\r\n                                    <a href=\"/forgot-password\" data-nav \r\n                                       class=\"text-sm text-brand-primary hover:text-brand-primary/80 transition-colors\">\r\n                                        Forgot Password?\r\n                                    </a>\r\n                                </div>\r\n                                <input type=\"password\" id=\"password\" required\r\n                                       class=\"w-full px-4 py-3 rounded-xl bg-brand-black/80 text-white \r\n                                              border border-brand-primary/30 focus:border-brand-primary \r\n                                              outline-none transition-all\" \r\n                                       placeholder=\"••••••••\">\r\n                            </div>\r\n\r\n                            <!-- Submit Button -->\r\n                            <button type=\"submit\" \r\n                                    class=\"w-full py-3 rounded-xl bg-brand-primary text-brand-blue \r\n                                           font-bold text-lg hover:bg-opacity-90 transition-all \r\n                                           flex items-center justify-center gap-2\">\r\n                                Sign In\r\n                                <i class=\"fas fa-arrow-right text-sm\"></i>\r\n                            </button>\r\n                        </form>\r\n\r\n                        <!-- Sign Up Link -->\r\n                        <p class=\"mt-6 text-center text-gray-400\">\r\n                            Don't have an account? \r\n                            <a href=\"/signup\" data-nav \r\n                               class=\"text-brand-primary hover:text-brand-primary/80 transition-colors\">\r\n                                Create Account\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n            <!-- Testimonials Section -->\r\n            <aside class=\"hidden lg:flex flex-1 relative bg-brand-dark overflow-hidden\">\r\n                ${handleTestimony()}\r\n            </aside>\r\n        </div>\r\n        `,\r\n        pageEvents\r\n    })\r\n}\r\n\r\nexport default login"],"names":["login","auth","reset","trackPageVisit","cleanupAll","pageEvents","initTestimonials","form","emailInput","passwordInput","submitButton","e","isValid","togglePassword","type","formData","loginHandler","googleButton","biometricButton","handleGoogleLogin","email","LOGO","handleTestimony"],"mappings":"glBASK,MAACA,EAAQ,SAAY,CAGtB,GAAI,CADc,MAAMC,EAAK,MAAM,OAAO,EAC1B,MAAO,CAAE,KAAM,GAAI,WAAY,IAAM,CAAE,CAAC,EACxDC,EAAM,yBAAyB,EAC/B,MAAMC,EAAc,EAEpBC,EAAU,EAEV,SAASC,GAAa,CAElB,WAAW,IAAMC,EAAgB,EAAI,GAAG,EAExC,MAAMC,EAAO,SAAS,eAAe,WAAW,EAC1CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAgB,SAAS,eAAe,UAAU,EAClDC,EAAeH,GAAM,cAAc,uBAAuB,EAG5DC,GACAA,EAAW,iBAAiB,QAAUG,GAAM,CACxC,MAAMC,EAAU,6BAA6B,KAAKD,EAAE,OAAO,KAAK,EAChEH,EAAW,MAAM,YAAcI,EAAU,GAAK,kBAClD,CAAC,EAIL,MAAMC,EAAiB,SAAS,cAAc,QAAQ,EACtDA,EAAe,KAAO,SACtBA,EAAe,UAAY,8FAC3BA,EAAe,UAAY,6BAEvBJ,IACAI,EAAe,iBAAiB,QAAS,IAAM,CAC3C,MAAMC,EAAOL,EAAc,OAAS,WAAa,OAAS,WAC1DA,EAAc,KAAOK,EACrBD,EAAe,UAAYC,IAAS,WAC9B,6BACA,kCACV,CAAC,EACDL,EAAc,cAAc,MAAM,SAAW,WAC7CA,EAAc,cAAc,YAAYI,CAAc,GAItDN,GACAA,EAAK,iBAAiB,SAAU,MAAOI,GAAM,CACzCA,EAAE,eAAc,EAGZD,IACAA,EAAa,SAAW,GACxBA,EAAa,UAAY;AAAA;AAAA;AAAA,uBAM7B,MAAMK,EAAW,CACb,MAAOP,EAAW,MAAM,KAAI,EAC5B,SAAUC,EAAc,KAC5C,EAEgB,MAAMO,EAAaD,CAAQ,EAGvBL,IACAA,EAAa,SAAW,GACxBA,EAAa,UAAY;AAAA;AAAA;AAAA,sBAKjC,CAAC,EAGL,MAAMO,EAAe,SAAS,eAAe,aAAa,EACpDC,EAAkB,SAAS,eAAe,gBAAgB,EAG5DD,GACAA,EAAa,iBAAiB,QAASE,CAAiB,EAIxDD,GAAmB,OAAO,oBAC1BA,EAAgB,iBAAiB,QAAS,SAAY,CAClD,MAAME,EAAQZ,GAAY,OAAO,KAAI,EACtB,MAAMQ,EAAa,CAAE,MAAAI,CAAK,CAAE,GAEvCb,EAAK,UAAU,OAAO,QAAQ,CAEtC,CAAC,EACMW,IACPA,EAAgB,MAAM,QAAU,OAExC,CAEA,MAAQ,CACJ,KAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAQYG,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBA+GtBC,EAAe,CAAE;AAAA;AAAA;AAAA,UAI3B,WAAAjB,CACR,CACA"}