{"version":3,"file":"reset-rZGyE_DY.js","sources":["../../src/script/views/user/functions/resetHandler.js","../../src/script/views/user/reset.js"],"sourcesContent":["import spinner from '../../../utils/spinner'\r\nimport toastify from '../../../components/toastify'\r\nimport supabase from '../../../utils/supabaseClients'\r\nimport { loadPage } from '../../../routes/router'\r\n\r\nexport async function resetHandler({ password }) {\r\n    try {\r\n        spinner.start()\r\n\r\n        const { error } = await supabase.auth.updateUser({\r\n            password: password\r\n        })\r\n\r\n        if (error) throw error\r\n\r\n        spinner.stop()\r\n        toastify({\r\n            text: \"Password reset successful! Please login with your new password\",\r\n            icon: \"fas fa-check-circle\",\r\n            background: \"bg-green-500/10\",\r\n            duration: 3000\r\n        })\r\n\r\n        // Delay redirect to show notification\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        await loadPage('login')\r\n        return true\r\n\r\n    } catch (error) {\r\n        spinner.stop()\r\n        toastify({\r\n            text: error.message || \"Failed to reset password\",\r\n            icon: \"fas fa-exclamation-circle\",\r\n            background: \"bg-red-500/10\",\r\n            duration: 3000\r\n        })\r\n        return false\r\n    }\r\n}","import LOGO from '../../../images/logo.jpg'\r\nimport reset, { cleanupAll } from '../../utils/reset'\r\nimport { handleTestimony, initTestimonials } from '../../components/Bannar'\r\nimport { resetHandler } from './functions/resetHandler'\r\nimport { checkPasswordStrength } from '../../utils/passwordStrength'\r\nimport { trackPageVisit } from '../../utils/analtics'\r\n\r\nconst resetPassword = async () => {\r\n    reset('Reset Password | Olymp AI Invest')\r\n    cleanupAll()\r\n    await trackPageVisit()\r\n\r\n    function pageEvents() {\r\n        // Initialize testimonials\r\n        setTimeout(() => initTestimonials(), 100)\r\n\r\n        const form = document.getElementById('resetForm')\r\n        const passwordInput = document.getElementById('password')\r\n        const confirmInput = document.getElementById('confirmPassword')\r\n        const strengthBar = document.getElementById('strengthBar')\r\n        const strengthText = document.getElementById('strengthText')\r\n        const indicators = document.getElementById('strengthIndicators')\r\n        const submitButton = form?.querySelector('button[type=\"submit\"]')\r\n\r\n        // Password visibility toggles\r\n        document.querySelectorAll('.password-group').forEach(group => {\r\n            const input = group.querySelector('input')\r\n            const toggle = group.querySelector('.password-toggle')\r\n\r\n            if (toggle) {\r\n                toggle.addEventListener('click', () => {\r\n                    const type = input.type === 'password' ? 'text' : 'password'\r\n                    input.type = type\r\n                    toggle.innerHTML = type === 'password' ?\r\n                        '<i class=\"fas fa-eye\"></i>' :\r\n                        '<i class=\"fas fa-eye-slash\"></i>'\r\n                })\r\n            }\r\n        })\r\n\r\n        // Password strength checker\r\n        if (passwordInput) {\r\n            passwordInput.addEventListener('input', (e) => {\r\n                const result = checkPasswordStrength(e.target.value)\r\n\r\n                strengthBar.style.width = `${result.strength}%`\r\n                strengthBar.className = `h-full rounded-full transition-all ${result.color}`\r\n                strengthText.textContent = `Password Strength: ${result.strength}%`\r\n\r\n                indicators.innerHTML = result.indicators\r\n                    .map(i => `<span class=\"px-2 py-1 rounded-full bg-brand-primary/20 text-xs\">${i}</span>`)\r\n                    .join('')\r\n\r\n                // Enable/disable submit based on strength\r\n                submitButton.disabled = result.strength < 50\r\n\r\n                // Check confirm password match\r\n                if (confirmInput.value) {\r\n                    const match = e.target.value === confirmInput.value\r\n                    confirmInput.style.borderColor = match ? '' : 'rgb(239, 68, 68)'\r\n                }\r\n            })\r\n        }\r\n\r\n        // Confirm password validation\r\n        if (confirmInput) {\r\n            confirmInput.addEventListener('input', (e) => {\r\n                const match = e.target.value === passwordInput.value\r\n                e.target.style.borderColor = match ? '' : 'rgb(239, 68, 68)'\r\n                submitButton.disabled = !match || checkPasswordStrength(passwordInput.value).strength < 50\r\n            })\r\n        }\r\n\r\n        // Form submission\r\n        if (form) {\r\n            form.addEventListener('submit', async (e) => {\r\n                e.preventDefault()\r\n\r\n                const password = passwordInput.value\r\n                const confirmPassword = confirmInput.value\r\n\r\n                if (password !== confirmPassword) {\r\n                    toastify({\r\n                        text: \"Passwords do not match\",\r\n                        icon: \"fas fa-exclamation-circle\",\r\n                        background: \"bg-red-500/10\"\r\n                    })\r\n                    return\r\n                }\r\n\r\n                // Disable submit button\r\n                if (submitButton) {\r\n                    submitButton.disabled = true\r\n                    submitButton.innerHTML = `\r\n                        <i class=\"fas fa-spinner fa-spin\"></i>\r\n                        <span>Resetting Password...</span>\r\n                    `\r\n                }\r\n\r\n                await resetHandler({ password })\r\n\r\n                // Re-enable submit button on failure\r\n                if (submitButton) {\r\n                    submitButton.disabled = false\r\n                    submitButton.innerHTML = `\r\n                        Reset Password\r\n                        <i class=\"fas fa-key text-sm\"></i>\r\n                    `\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    return ({\r\n        html: /* html */`\r\n        <div class=\"min-h-screen flex flex-col lg:flex-row animate-fade-in-up\">\r\n            <!-- Form Section -->\r\n            <main class=\"flex-1 flex items-center justify-center p-6 lg:p-12 relative overflow-hidden\">\r\n                <div class=\"absolute inset-0 bg-brand-blue/10\"></div>\r\n                \r\n                <!-- Logo -->\r\n                <div class=\"absolute top-8 left-8\">\r\n                    <a href=\"/\" data-nav class=\"flex items-center gap-2\">\r\n                        <img src=\"${LOGO}\" alt=\"Olymp AI Invest\" class=\"h-8\">\r\n                        <span class=\"text-lg font-bold text-brand-primary\">Olymp AI</span>\r\n                    </a>\r\n                </div>\r\n\r\n                <!-- Form Container -->\r\n                <div class=\"w-full max-w-md z-10 relative\">\r\n                    <div class=\"p-8\">\r\n                        <div class=\"text-center lg:text-left mb-8\">\r\n                            <h1 class=\"text-2xl lg:text-3xl font-bold text-white mb-2\">\r\n                                Reset Your Password\r\n                            </h1>\r\n                            <p class=\"text-gray-400\">\r\n                                Create a new strong password for your account\r\n                            </p>\r\n                        </div>\r\n\r\n                        <form id=\"resetForm\" class=\"space-y-6\">\r\n                            <!-- Password Input -->\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"text-sm font-medium text-gray-300\" for=\"password\">\r\n                                    New Password\r\n                                </label>\r\n                                <div class=\"relative password-group\">\r\n                                    <input \r\n                                        type=\"password\" \r\n                                        id=\"password\" \r\n                                        required\r\n                                        class=\"w-full px-4 py-3 pr-12 rounded-xl bg-brand-black/80 text-white \r\n                                               border border-brand-primary/30 focus:border-brand-primary \r\n                                               outline-none transition-all\" \r\n                                        placeholder=\"Create a strong password\">\r\n                                    <button type=\"button\" \r\n                                            class=\"password-toggle absolute right-4 top-1/2 -translate-y-1/2 \r\n                                                   text-gray-400 hover:text-white transition-colors\">\r\n                                        <i class=\"fas fa-eye\"></i>\r\n                                    </button>\r\n                                </div>\r\n\r\n                                <!-- Password Strength Indicator -->\r\n                                <div class=\"mt-3 space-y-2\">\r\n                                    <div class=\"h-1.5 bg-brand-black/80 rounded-full overflow-hidden\">\r\n                                        <div id=\"strengthBar\" class=\"h-full w-0 transition-all duration-300\"></div>\r\n                                    </div>\r\n                                    <div class=\"flex items-center justify-between\">\r\n                                        <span id=\"strengthText\" class=\"text-xs text-gray-400\">\r\n                                            Password Strength: 0%\r\n                                        </span>\r\n                                        <div id=\"strengthIndicators\" class=\"flex gap-2\"></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Confirm Password -->\r\n                            <div class=\"space-y-2\">\r\n                                <label class=\"text-sm font-medium text-gray-300\" for=\"confirmPassword\">\r\n                                    Confirm Password\r\n                                </label>\r\n                                <div class=\"relative password-group\">\r\n                                    <input \r\n                                        type=\"password\" \r\n                                        id=\"confirmPassword\" \r\n                                        required\r\n                                        class=\"w-full px-4 py-3 pr-12 rounded-xl bg-brand-black/80 text-white \r\n                                               border border-brand-primary/30 focus:border-brand-primary \r\n                                               outline-none transition-all\" \r\n                                        placeholder=\"Confirm your password\">\r\n                                    <button type=\"button\" \r\n                                            class=\"password-toggle absolute right-4 top-1/2 -translate-y-1/2 \r\n                                                   text-gray-400 hover:text-white transition-colors\">\r\n                                        <i class=\"fas fa-eye\"></i>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Submit Button -->\r\n                            <button type=\"submit\" \r\n                                    disabled\r\n                                    class=\"w-full py-3 rounded-xl bg-brand-primary text-brand-blue \r\n                                           font-bold text-lg hover:bg-opacity-90 transition-all \r\n                                           flex items-center justify-center gap-2\r\n                                           disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                                Reset Password\r\n                                <i class=\"fas fa-key text-sm\"></i>\r\n                            </button>\r\n                        </form>\r\n\r\n                        <!-- Back to Login Link -->\r\n                        <p class=\"mt-6 text-center text-gray-400\">\r\n                            Remember your password? \r\n                            <a href=\"/login\" data-nav \r\n                               class=\"text-brand-primary hover:text-brand-primary/80 transition-colors\">\r\n                                Back to Login\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n\r\n            <!-- Testimonials Section -->\r\n            <aside class=\"hidden lg:flex flex-1 relative bg-brand-dark overflow-hidden\">\r\n                ${handleTestimony()}\r\n            </aside>\r\n        </div>\r\n        `,\r\n        pageEvents\r\n    })\r\n}\r\n\r\nexport default resetPassword"],"names":["resetHandler","password","spinner","error","supabase","toastify","resolve","loadPage","resetPassword","reset","cleanupAll","trackPageVisit","pageEvents","initTestimonials","form","passwordInput","confirmInput","strengthBar","strengthText","indicators","submitButton","group","input","toggle","type","result","checkPasswordStrength","i","match","confirmPassword","LOGO","handleTestimony"],"mappings":"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"}